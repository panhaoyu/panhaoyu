Title: Django布署到Apache2上的坑
Date: 2017-12-18 00:35
Summary: 

# 结论

所有的在Debug模式下搞定的东西，不要去django里面找Bug。新出现的Bug九成是Apache2带来的。

# 中文路径乱码的坑

中文路径乱码。`os.stat()`这是一个再标准不过的标准库的函数，Python的，跨平台兼容是出名的，但是这一个标准库函数还是出了问题，我开始在django里面各种调试，在django里面测得了`os.environ`变量中的`LANG`确实是`C`，然后在django里面设置`os.system('export LANG=C')`也并没有什么卵用。最后在apache在配置文件`envvars`文件里面改掉相应的配置项，解决问题。

# 文件权限的坑

文件权限各种出问题。apache中，对文件权限进行了一个新用户的设置，设置为`www-data`用户。然后就涉及到linux的各种权限问题。新手并不能很好的搞定这个问题，于是各种`chmod`，`chown`，整的一团糟。最后采取了一种很野蛮的方式，直接在apache的配置文件中`envvars`将apache2的用户名也改为了我自己的用户名也就是`wolf`，虽然可能会带来一些安全性的问题，但是作为我的个人网站，数据并没有太重要，就暂时先这么用了。问题解决。

# 心得体会

在接触一个新库的时候，还是应该看一下这个库的帮助文档，而不是仅仅在网上搜各种教程。教程所带来的理解太浅薄，很难解决带来的问题，往往会造成更大的困扰。如果今天早一点传帮助文档，可能问题早就解决了。